
%%% Preamble
\documentclass[paper=a4, fontsize=11pt]{scrartcl}
\usepackage[T1]{fontenc}
\usepackage{fourier}
\usepackage{listings}
\usepackage[english]{babel}															% English language/hyphenation
\usepackage[protrusion=true,expansion=true]{microtype}	
\usepackage{amsmath,amsfonts,amsthm} % Math packages
\usepackage[pdftex]{graphicx}	
\usepackage{url}


%%% Custom sectioning
\usepackage{sectsty}
\allsectionsfont{\centering \normalfont\scshape}


%%% Custom headers/footers (fancyhdr package)
\usepackage{fancyhdr}
\usepackage{listings}
\pagestyle{fancyplain}
\fancyhead{}											% No page header
\fancyfoot[L]{}											% Empty 
\fancyfoot[C]{}											% Empty
\fancyfoot[R]{\thepage}									% Pagenumbering
\renewcommand{\headrulewidth}{0pt}			% Remove header underlines
\renewcommand{\footrulewidth}{0pt}				% Remove footer underlines
\setlength{\headheight}{13.6pt}


%%% Equation and float numbering
\numberwithin{equation}{section}		% Equationnumbering: section.eq#
\numberwithin{figure}{section}			% Figurenumbering: section.fig#
\numberwithin{table}{section}				% Tablenumbering: section.tab#


%%% Maketitle metadata
\newcommand{\horrule}[1]{\rule{\linewidth}{#1}} 	% Horizontal rule

\title{
	%\vspace{-1in} 	
	\usefont{OT1}{bch}{b}{n}
	\horrule{0.5pt} \\[0.4cm]
	\huge Homework 1 \\
	\horrule{2pt} \\[0.5cm]
}
\author{
	\normalfont 								\normalsize
	School of Information Science and Technology \\
	\normalsize XXX\\[-3pt]		\normalsize
	\today
}
\date{}


%%% Begin document
\begin{document}
	\maketitle
	
	\section{Single-Relation Queries (36 pts)}
	
	\begin{enumerate}
		\item Consider the following relation:\\
		Graph(n1 , n2)\\
		A tuple (n1, n2) in Graph stores a directed edge from a node n1 to a node n2 in the corresponding graph. Your goal is to, for \textit{every} node in the graph, count the number of outgoing edges of that node. Note that for nodes without any outgoing edges, their edge count would be zero; you need to output this as well.
		You can assume that:
		\begin{enumerate}
			\item there are no duplicates or null values in the table; and
			\item every node in the graph is involved in at least one edge.
		\end{enumerate}
		
		\item Consider the following relation:\\
		Trained(\underline{student}, master, year)\\
		A tuple (S, M, Y) in Trained specifies that a SQL Master M trained student S who graduated in year Y. Your goal is to find \textit{the count of} SQL Masters who trained a student who graduated in the same year that 'Alice' or 'Bob' graduated.\\
		
		\item Consider the following relation:\\
		DBMS(\underline{operator}, system, performance)\\
		A tuple (O, S, P) in DBMS specifies an operator O in system S and has the performance value P. Your goal is to find those systems whose operators achieves a higher performance value on average than the average performance value in a system named 'PostgreSQL'.\\
		
		
	\end{enumerate}
	
	\newpage
	
	\section{Multi-Relation Queries (40 pts)}
	Consider the following relations representing student information at UIUC:\\
	Mentorship(\underline{mentee\_sid}, mentor\_sid)\\
	Study(\underline{sid}, credits)\\
	Enrollment(\underline{did}, \underline{sid})\\
	Student(\underline{sid}, street , city)
	
	\begin{itemize}
		\item A tuple (M1, M2) in Mentorship specifies that M2 is a mentor of another student M1. 
		\item A tuple (S, C) in Study specifies that the student S has taken C credits.
		\item A tuple in Enrollment (D, S) specifies that student S is enrolled in department D. 
		\item A (ST, S, C) in Student specifies that student ST lives on street S in city C.
	\end{itemize}
	
	\begin{enumerate}
	
		\item Find all students who live in the same city and on the same street as their mentor.\\
		
		\item Find all students(i.e., distinct sid) who have taken more credits than the average credits of all of the students of their department.\\
		
	\end{enumerate}
	
	\newpage
	
	\section{Database Manipulation and Views (24 pts)}
	
	\begin{enumerate}
	
		\item In the Study relation, insert a new student, whose id is 66666 and has 0 credits.\\

		\item In the Study relation, delete students who have graduated (i.e., the ones who have more than 200 credits).\\
		
		\item In the Study relation, add 2 credits for students who are mentors.\\
		
		\item Incoming students are those who have been accepted (i.e., exist in the \textbf{Student} relation) but have not registered in any department (i.e., do not exist in the \textbf{Enrollment} relation). Create a View that contains \textbf{sid} of all incoming students.\\
		
	\end{enumerate}
	
	
\end{document}